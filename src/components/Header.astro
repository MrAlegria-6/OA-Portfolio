---
const navItems = [
  { label: "About Me", href: "#sobre-mi" },
  { label: "Education", href: "#education" },
  { label: "Proyects", href: "#proyects" },
  { label: "Contact", href: "#contact" },

  { label: "CV", href: "./CV.pdf", download: true },
];

import "@fontsource/k2d";
---

<header class="header">
  <nav class="nav">
    <ul class="nav-list">
      {
        navItems.map((item) => (
          <li class="nav-item">
            <a
              href={item.href}
              class="nav-link"
              {...(item.download ? { download: "Alegria-CV.pdf" } : {})}
            >
              {item.label}
            </a>
          </li>
        ))
      }
    </ul>

    <div class="nav-controls">
    </div>
  </nav>
</header>

<style>
  /* Header base */
  .header {
    background: whitesmoke;
    backdrop-filter: blur(10px);
    padding: 1.5rem 2rem;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    z-index: 1000;
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
    font-family: "K2D", sans-serif;
  }

  .nav {
    max-width: 1200px;
    margin: 0 auto;
    display: flex;
    align-items: center;
    justify-content: space-between;
  }

  .nav-list {
    display: flex;
    gap: 3rem;
    list-style: none;
  }

  .nav-item {
    position: relative;
  }

  .nav-link {
    color: #262525;
    text-decoration: none;
    font-size: 1rem;
    font-weight: 500;
    transition: color 0.3s ease;
    padding: 0.5rem 0;
  }

  .nav-link:hover {
    background: linear-gradient(135deg, #fbbf24 0%, #d97706 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    color: transparent;
  }

  .nav-link::after {
    content: "";
    position: absolute;
    bottom: 0;
    left: 0;
    width: 0;
    height: 2px;
    background: linear-gradient(135deg, #fbbf24 0%, #d97706 100%);
    transition: width 0.3s ease;
  }

  .nav-link:hover::after {
    width: 100%;
  }

  /* Nav Controls Container */
  .nav-controls {
    display: flex;
    align-items: center;
    gap: 1.5rem;
  }

  /* Responsive */
  @media (max-width: 768px) {
    .nav-list {
      gap: 1.5rem;
      flex-wrap: wrap;
    }

    .nav-link {
      font-size: 0.9rem;
    }

    .nav-controls {
      gap: 1rem;
    }

    .lang-switch {
      transform: scale(0.9);
    }

    .theme-switch {
      transform: scale(0.9);
    }
  }

  @media (max-width: 480px) {
    .nav-controls {
      gap: 0.5rem;
    }

    .lang-switch {
      transform: scale(0.8);
    }

    .theme-switch {
      transform: scale(0.8);
    }
  }
</style>
<script>
  function smoothScrollTo(targetPosition, duration = 1000) {
    const startPosition = window.pageYOffset;
    const distance = targetPosition - startPosition;
    let startTime = null;

    function animation(currentTime) {
      if (startTime === null) startTime = currentTime;
      const timeElapsed = currentTime - startTime;
      const progress = Math.min(timeElapsed / duration, 1);
      
      // Funci칩n de easing para hacer el scroll m치s suave
      const ease = progress < 0.5
        ? 2 * progress * progress
        : 1 - Math.pow(-2 * progress + 2, 2) / 2;
      
      window.scrollTo(0, startPosition + distance * ease);
      
      if (timeElapsed < duration) {
        requestAnimationFrame(animation);
      }
    }

    requestAnimationFrame(animation);
  }

  window.addEventListener('load', () => {
    const navLinks = document.querySelectorAll('a[href^="#"]');
    
    navLinks.forEach(link => {
      link.addEventListener('click', function(e) {
        e.preventDefault();
        e.stopPropagation();
        
        const targetId = this.getAttribute('href');
        const targetSection = document.querySelector(targetId);
        
        if (targetSection) {
          const headerHeight = 100;
          const elementPosition = targetSection.getBoundingClientRect().top;
          const offsetPosition = elementPosition + window.pageYOffset - headerHeight;
          
          // Usar nuestra funci칩n de scroll suave personalizada
          smoothScrollTo(offsetPosition, 800); // 800ms de duraci칩n
        }
      });
    });
  });
</script>